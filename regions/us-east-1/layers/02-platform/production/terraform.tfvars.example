# ============================================================================
# Platform Layer Configuration Example
# ============================================================================
# Copy this file to terraform.tfvars and modify the values for your environment

# Basic Configuration
aws_region   = "us-east-1"
environment  = "production"
cluster_name = "us-test-cluster-01"

# EBS CSI Driver
ebs_csi_addon_version = "v1.35.0-eksbuild.1"

# DNS Configuration
dns_zones = {
  "example.com" = {
    comment     = "Production domain for Example Corp"
    environment = "production"
    client      = "example-corp"
  }
  "api.example.com" = {
    comment     = "API subdomain for Example Corp"
    environment = "production"
    client      = "example-corp"
  }
}

# External DNS
enable_external_dns = true

# Ingress Classes Configuration
alb_ingress_class_name     = "alb"
set_alb_as_default         = true
create_nlb_ingress_class   = false
nlb_ingress_class_name     = "nlb"
nlb_scheme                 = "internet-facing"
create_nginx_ingress_class = false
nginx_ingress_class_name   = "nginx"

# ============================================================================
# Istio Service Mesh Configuration
# ============================================================================

# Enable Istio deployment
enable_istio = true

# Istio version (check https://github.com/istio/istio/releases for latest)
istio_version = "1.23.1"

# Enable ambient mesh mode (recommended for new deployments)
istio_ambient_mode = true

# Gateway configuration
istio_ingress_gateway      = true
istio_egress_gateway       = false
istio_ingress_gateway_type = "LoadBalancer"  # or "ClusterIP" if using ALB

# Monitoring (requires Prometheus operator to be deployed)
istio_monitoring = false

# Namespaces to automatically enable ambient mode for
# Add your application namespaces here
istio_ambient_namespaces = [
  "default",
  "production"
]

# ============================================================================
# Alternative Configuration Examples
# ============================================================================

# Example 1: Minimal Istio setup (ambient mode disabled, ClusterIP gateway)
# enable_istio               = true
# istio_ambient_mode         = false
# istio_ingress_gateway      = true
# istio_ingress_gateway_type = "ClusterIP"
# istio_egress_gateway       = false
# istio_monitoring           = false

# Example 2: Full Istio setup with monitoring
# enable_istio               = true
# istio_ambient_mode         = true
# istio_ingress_gateway      = true
# istio_egress_gateway       = true
# istio_ingress_gateway_type = "LoadBalancer"
# istio_monitoring           = true
# istio_ambient_namespaces   = ["default", "production", "staging", "app-namespace"]

# Example 3: Disable Istio (default)
# enable_istio = false
